<!DOCTYPE html>
<html lang="zh-CN"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ARXENTRY - 运动科技平台</title>
    <!-- 引入 Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="Style.css">
    
</head>
<body class="bg-gray-900"> <!-- 设置一个基础背景色 -->

    <!-- 导航栏 (Navigation Bar) -->
    <header class="sticky top-0 z-50 header-bg shadow-xl border-b border-cyan-500/20">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <!-- Logo -->
                <div class="flex-shrink-0">
                    <a href="#home" class="flex items-center space-x-2">
                        <!-- Stylized 'A' Logo SVG (Neon Colors) -->
                        <svg class="h-9 w-9" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <!-- Logo主体：A字形，使用青色到品红色渐变 -->
                            <path d="M16 4L8 28H10.5L12 23H20L21.5 28H24L16 4Z" fill="url(#neonGradient)"></path>
                            <!-- 轨道1：青色 -->
                            <circle cx="16" cy="16" r="14" stroke="#00e5ff" stroke-width="1.5" opacity="0.4"></circle>
                            <!-- 轨道2：品红色 -->
                            <ellipse cx="16" cy="16" rx="10" ry="14" transform="rotate(45 16 16)" stroke="#ff28c6" stroke-width="1.5" opacity="0.6"></ellipse>

                            <defs>
                                <linearGradient id="neonGradient" x1="16" y1="4" x2="16" y2="28" gradientUnits="userSpaceOnUse">
                                    <stop stop-color="#00e5ff"></stop>
                                    <stop offset="1" stop-color="#ff28c6"></stop>
                                </linearGradient>
                            </defs>
                        </svg>
                        <span class="text-2xl font-extrabold text-white tracking-widest uppercase">
                            ARXENTRY
                        </span>
                    </a>
                </div>
                
                <!-- 桌面导航链接 -->
                <nav class="hidden md:flex space-x-8">
                    <a href="#home" class="text-gray-200 hover:text-neon-cyan transition duration-150 font-medium">首页</a>
                    <a href="#features" class="text-gray-200 hover:text-neon-cyan transition duration-150 font-medium">核心功能</a>
                    <a href="#about" class="text-gray-200 hover:text-neon-cyan transition duration-150 font-medium">关于我们</a>
                    <a href="#contact" class="text-gray-200 hover:text-neon-cyan transition duration-150 font-medium">联系方式</a>
                </nav>

                <!-- 登录/注册按钮 -->
                <div class="hidden md:flex items-center space-x-4">
                    <!-- 更新：添加 ID 以便 JS 捕获点击事件 -->
                    <button id="auth-modal-button" class="inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-lg shadow-sm text-gray-900 bg-neon-fuchsia hover:bg-neon-fuchsia transition duration-150 transform hover:scale-[1.05]">
                        登录/注册
                    </button>
                </div>

                <!-- 移动端菜单按钮 (Hamburger Icon) -->
                <button id="mobile-menu-button" class="md:hidden text-gray-200 hover:text-neon-cyan focus:outline-none">
                    <svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                    </svg>
                </button>
            </div>
        </div>
        
        <!-- 移动端菜单内容 (初始隐藏) -->
        <div id="mobile-menu" class="md:hidden hidden bg-gray-900/90 backdrop-blur-sm">
            <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
                <a href="#home" class="mobile-menu-link block px-3 py-2 rounded-md text-base font-medium text-gray-200 hover:bg-gray-800 hover:text-neon-cyan">首页</a>
                <a href="#features" class="mobile-menu-link block px-3 py-2 rounded-md text-base font-medium text-gray-200 hover:bg-gray-800 hover:text-neon-cyan">核心功能</a>
                <a href="#about" class="mobile-menu-link block px-3 py-2 rounded-md text-base font-medium text-gray-200 hover:bg-gray-800 hover:text-neon-cyan">关于我们</a>
                <a href="#contact" class="mobile-menu-link block px-3 py-2 rounded-md text-base font-medium text-gray-200 hover:bg-gray-800 hover:text-neon-cyan">联系方式</a>
                <!-- 更新：添加 ID 以便 JS 捕获点击事件 -->
                <button id="mobile-auth-button" class="w-full text-left block px-3 py-2 rounded-md text-base font-medium text-gray-200 hover:bg-gray-800 hover:text-neon-cyan">
                    登录/注册
                </button>
            </div>
        </div>
    </header>

    <main>
        <!-- 英雄区 (Hero Section) ... -->
        <section id="home" class="hero-bg py-24 sm:py-32 lg:py-40 text-white">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 
                        lg:grid lg:grid-cols-3 lg:gap-8 lg:items-center 
                        text-center lg:text-left">
                
                <!-- 1. 左侧：动态旋转运动选项 (占据一列) -->
                <div class="lg:order-1 order-2 flex justify-center items-center h-full mb-12 lg:mb-0">
                    <div class="rotator-container">
                        <div class="rotator-cube">
                            
                            <!-- 注意：内部图标尺寸从 h-12 w-12 调整为 h-8 w-8 -->
                            <div class="rotator-face face-1" data-sport="篮球">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 mb-3" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <circle cx="12" cy="12" r="10"></circle>
                                    <path d="m8 12 1.4-1.4"></path>
                                    <path d="m14.5 12.5-1.4 1.4"></path>
                                    <path d="m11 15 1.4-1.4"></path>
                                    <path d="m15 10.5-1.4 1.4"></path>
                                </svg>
                                篮球
                            </div>

                            <div class="rotator-face face-2" data-sport="羽毛球">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 mb-3" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <circle cx="12" cy="17" r="3"></circle>
                                    <path d="M12 14c-1 0-2-1-2-2v-4l2-4 2 4v4c0 1-1 2-2 2z"></path>
                                    <path d="M10 8h4"></path>
                                </svg>
                                羽毛球
                            </div>

                            <div class="rotator-face face-3" data-sport="足球">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 mb-3" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="m16 9-4-4-4 4"></path>
                                    <path d="m12 5v14"></path>
                                    <path d="m8 15 4 4 4-4"></path>
                                </svg>
                                足球
                            </div>
                            
                            <div class="rotator-face face-4" data-sport="网球">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 mb-3" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <circle cx="12" cy="12" r="8"></circle>
                                    <path d="M12 4c-2.76 0-5 2.24-5 5s5 3 5 5"></path>
                                    <path d="M12 20c2.76 0 5-2.24 5-5s-5-3-5-5"></path>
                                </svg>
                                网球
                            </div>

                            <div class="rotator-face face-5" data-sport="健身房">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 mb-3" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="m15 15-4 5"></path>
                                    <path d="m16 4h4v4"></path>
                                    <path d="m17 19.5-3.5-3.5c-1.45-1.45-2.5-3.5-2.5-5.5s1.25-3.75 2.5-5l1.5-1.5 5 5-1.5 1.5c-1.25 1.25-2.5 3.5-2.5 5.5s-1 4.05-2.5 5.5l-4 5"></path>
                                </svg>
                                健身房
                            </div>

                            <div class="rotator-face face-6" data-sport="更多运动">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 mb-3" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <line x1="12" y1="5" x2="12" y2="19"></line>
                                    <line x1="5" y1="12" x2="19" y2="12"></line>
                                </svg>
                                更多运动
                            </div>

                        </div>
                    </div>
                    <p class="mt-4 text-sm text-gray-500 lg:hidden block">滑动查看更多运动</p>
                </div>

                <!-- 2. 中间：现有 Hero 内容 (占据一列) -->
                <div class="lg:order-2 order-1 lg:text-left text-center">
                    <h1 class="text-3xl sm:text-4xl lg:text-5xl font-extrabold tracking-tight">
                        运动无界，<span class="text-neon-cyan">即刻预订</span>
                    </h1>
                    <p class="mt-4 text-lg sm:text-xl text-gray-400 max-w-3xl lg:max-w-none mx-auto">
                        ARXENTRY 助您轻松预订最佳运动场地，发现附近的精彩活动。
                    </p>
                    <div class="mt-8 flex flex-col sm:flex-row justify-center lg:justify-start space-y-4 sm:space-y-0 sm:space-x-4">
                        <a href="#features" class="inline-flex items-center justify-center px-6 py-3 border border-transparent text-base font-bold rounded-lg shadow-xl text-gray-900 bg-neon-fuchsia hover:bg-neon-fuchsia transition duration-300 transform hover:scale-105">
                            立即开始预订
                        </a>
                        <a href="#about" class="inline-flex items-center justify-center px-6 py-3 border border-neon-cyan text-base font-bold rounded-lg shadow-xl text-neon-cyan bg-transparent hover:bg-neon-cyan/10 transition duration-300 transform hover:scale-105">
                            发现附近活动
                        </a>
                    </div>
                </div>
                
                <!-- 3. 右侧：预约人数与奖励面板 (占据一列) -->
                <div class="lg:order-3 order-3 flex justify-center lg:justify-end mt-12 lg:mt-0">
                    <div class="w-full max-w-xs card-bg p-6 rounded-xl shadow-lg border border-neon-cyan/50 text-center space-y-4 transition duration-500 hover:shadow-cyan-500/50">
                        <p class="text-sm font-semibold text-neon-fuchsia uppercase">当前平台预约量</p>
                        <div class="text-center">
                            <span id="reservation-count" class="text-6xl font-extrabold text-white block leading-none">499</span>
                            <span class="text-xl font-bold text-neon-cyan mt-1 block">次预约已达成</span>
                        </div>
                        
                        <div class="pt-4 border-t border-gray-700/50">
                            <h4 class="text-lg font-bold text-white mb-2">🎉 幸运儿活动 🎉</h4>
                            <p id="prize-message" class="text-sm font-medium text-gray-400 transition duration-500">再有 <span class="text-neon-cyan font-bold text-lg">1</span> 位预约用户，将送出豪华礼包！</p>
                            <p id="prize-status" class="hidden text-sm font-bold text-yellow-300 bg-yellow-900/30 rounded-md p-2 mt-2 border border-yellow-700">
                                恭喜！您将获得 ARXENTRY 豪华礼包！
                            </p>
                        </div>
                    </div>
                </div>

            </div>
        </section>

        <!-- 产品特点/服务区 (Features Section) ... -->
        <section id="features" class="py-20 sm:py-32 features-bg">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center">
                    <h2 class="text-base text-neon-fuchsia font-semibold tracking-wide uppercase">核心优势</h2>
                    <p class="mt-2 text-3xl leading-8 font-extrabold tracking-tight text-white sm:text-4xl">
                        我们提供的核心功能
                    </p>
                </div>

                <div class="mt-16 grid grid-cols-1 gap-12 sm:grid-cols-2 lg:grid-cols-3">
                    
                    <!-- Feature 1: 预订场地 (Booking Venues) -->
                    <div class="card-bg p-8 rounded-xl shadow-lg border border-gray-700 hover:shadow-cyan-500/30 hover:shadow-2xl transition duration-300 transform hover:-translate-y-1">
                        <div class="flex items-center justify-center h-12 w-12 rounded-full bg-cyan-900/50 text-neon-cyan border border-neon-cyan/50">
                            <!-- Calendar Check Icon -->
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <rect width="18" height="18" x="3" y="4" rx="2" ry="2"></rect>
                                <line x1="16" x2="16" y1="2" y2="6"></line>
                                <line x1="8" x2="8" y1="2" y2="6"></line>
                                <line x1="3" x2="21" y1="10" y2="10"></line>
                                <path d="m9 16 2 2 4-4"></path>
                            </svg>
                        </div>
                        <h3 class="mt-6 text-xl font-bold text-white">场地快速预订</h3>
                        <p class="mt-3 text-base text-gray-400">
                            实时查看数千家运动场馆的空闲时段，一键锁定，即刻拥有专属运动空间。
                        </p>
                    </div>

                    <!-- Feature 2: 地点选择 (Location Selection) -->
                    <div class="card-bg p-8 rounded-xl shadow-lg border border-gray-700 hover:shadow-cyan-500/30 hover:shadow-2xl transition duration-300 transform hover:-translate-y-1">
                        <div class="flex items-center justify-center h-12 w-12 rounded-full bg-cyan-900/50 text-neon-cyan border border-neon-cyan/50">
                            <!-- Map Pin Icon -->
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"></path>
                                <circle cx="12" cy="10" r="3"></circle>
                            </svg>
                        </div>
                        <h3 class="mt-6 text-xl font-bold text-white">智能地点选择</h3>
                        <p class="mt-3 text-base text-gray-400">
                            基于地理位置和偏好，为您推荐最近、最匹配的运动场地，省时省力。
                        </p>
                    </div>

                    <!-- Feature 3: 活动 (Events/Activities) -->
                    <div class="card-bg p-8 rounded-xl shadow-lg border border-gray-700 hover:shadow-cyan-500/30 hover:shadow-2xl transition duration-300 transform hover:-translate-y-1">
                        <div class="flex items-center justify-center h-12 w-12 rounded-full bg-cyan-900/50 text-neon-cyan border border-neon-cyan/50">
                            <!-- Users Icon -->
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path>
                                <circle cx="9" cy="7" r="4"></circle>
                                <path d="M22 21v-2a4 4 0 0 0-3-3.87"></path>
                                <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                            </svg>
                        </div>
                        <h3 class="mt-6 text-xl font-bold text-white">精彩运动活动</h3>
                        <p class="mt-3 text-base text-gray-400">
                            无论是组队约战还是单人报名，轻松创建和加入您感兴趣的运动社群和活动。
                        </p>
                    </div>

                </div>
            </div>
        </section>

        <!-- 关于我们 (About Section) ... -->
        <section id="about" class="py-20 sm:py-32 features-bg">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="lg:text-center">
                    <h2 class="text-base text-neon-fuchsia font-semibold tracking-wide uppercase">公司愿景</h2>
                    <p class="mt-2 text-3xl leading-8 font-extrabold tracking-tight text-white sm:text-4xl">
                        关于 ARXENTRY
                    </p>
                </div>

                <div class="mt-10 lg:grid lg:grid-cols-2 lg:gap-8 lg:items-center">
                    <div>
                        <p class="text-lg text-gray-400">
                            ARXENTRY 成立于 2018 年，致力于通过科技力量连接运动爱好者与优质场馆。我们的目标是打造一个高效、便捷、充满活力的运动社区，让运动成为生活的一部分。
                        </p>
                        <p class="mt-4 text-lg text-gray-400">
                            我们相信，每个人都值得拥有更简单、更愉快的运动体验。通过创新的预订系统和社交功能，我们帮助用户轻松实现运动目标，享受团队协作和挑战的乐趣。
                        </p>
                        <div class="mt-6">
                            <a href="#contact" class="text-base font-medium text-neon-fuchsia hover:text-neon-fuchsia/80 transition duration-150">
                                了解更多关于我们的故事 →
                            </a>
                        </div>
                    </div>
                    <!-- 占位图或公司插画 -->
                    <div class="mt-10 lg:mt-0">
                        <div class="bg-gray-800 p-8 rounded-xl shadow-inner text-center border border-gray-700">
                            <h4 class="text-xl font-bold text-white">科技驱动运动</h4>
                            <p class="mt-2 text-gray-400">
                                用技术连接每一个运动时刻
                            </p>
                            <!-- 简单的SVG图形占位 -->
                            <svg class="mx-auto mt-4 w-full max-w-sm h-48 text-neon-cyan" viewBox="0 0 200 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <rect x="10" y="10" width="180" height="80" rx="10" stroke="currentColor" stroke-width="3" opacity="0.5"></rect>
                                <circle cx="100" cy="50" r="10" fill="currentColor"></circle>
                                <path d="M30 70 C 60 40, 140 40, 170 70" stroke="currentColor" stroke-width="3" fill="none"></path>
                            </svg>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 联系我们 (Contact Section) ... -->
        <section id="contact" class="py-20 hero-bg text-white">
            <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
                <h2 class="text-3xl font-extrabold">与我们联系</h2>
                <p class="mt-4 text-lg text-gray-400">
                    成为我们的合作伙伴，或了解如何入驻场馆平台。
                </p>
                <div class="mt-8">
                    <a href="mailto:info@example.com" class="inline-flex items-center justify-center px-6 py-3 border border-transparent text-base font-medium rounded-lg shadow-sm text-gray-900 bg-neon-cyan hover:bg-neon-cyan/80 transition duration-150 transform hover:scale-105">
                        发送邮件给我们
                    </a>
                </div>
            </div>
        </section>
    </main>

    <!-- 页脚 (Footer) ... -->
    <footer class="bg-gray-900 text-white">
        <div class="max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-2 md:grid-cols-4 gap-8">
                <!-- 公司信息 -->
                <div>
                    <h3 class="text-sm font-semibold tracking-wider text-neon-fuchsia uppercase">ARXENTRY</h3>
                    <ul role="list" class="mt-4 space-y-4">
                        <li><a href="#about" class="text-base text-gray-300 hover:text-neon-cyan">关于我们</a></li>
                        <li><a href="#features" class="text-base text-gray-300 hover:text-neon-cyan">核心功能</a></li>
                        <li><a href="#" class="text-base text-gray-300 hover:text-neon-cyan">场馆入驻</a></li>
                    </ul>
                </div>
                <!-- 快速链接 -->
                <div>
                    <h3 class="text-sm font-semibold tracking-wider text-neon-fuchsia uppercase">支持</h3>
                    <ul role="list" class="mt-4 space-y-4">
                        <li><a href="#" class="text-base text-gray-300 hover:text-neon-cyan">帮助中心</a></li>
                        <li><a href="#" class="text-base text-gray-300 hover:text-neon-cyan">隐私政策</a></li>
                        <li><a href="#" class="text-base text-gray-300 hover:text-neon-cyan">服务条款</a></li>
                    </ul>
                </div>
                <!-- 联系方式 -->
                <div class="col-span-2 md:col-span-1">
                    <h3 class="text-sm font-semibold tracking-wider text-neon-fuchsia uppercase">联系我们</h3>
                    <p class="mt-4 text-base text-gray-300">电话: (010) 1234-5678</p>
                    <p class="text-base text-gray-300">邮箱: info@arxentry.com</p>
                    <address class="mt-2 text-base text-gray-300 not-italic">地址: 某市运动科技园B座202室</address>
                </div>
            </div>
            
            <!-- 版权信息 -->
            <div class="mt-8 border-t border-gray-700 pt-8">
                <p class="text-base text-gray-400 text-center">
                    © 2025 ARXENTRY. 保留所有权利。
                </p>
            </div>
        </div>
    </footer>


    <!-- 运动预约模态框 (Booking Modal) ... -->
    <div id="booking-modal" class="fixed inset-0 z-[100] hidden items-center justify-center p-4" style="background-color: rgba(0, 0, 0, 0.8);">
        
        <!-- Modal Content Container -->
        <div class="bg-gray-900 border border-neon-cyan/50 rounded-xl shadow-2xl w-full max-w-4xl h-[90vh] md:h-auto overflow-y-auto transform scale-95 opacity-0 transition-all duration-300" id="modal-content">
            
            <!-- Modal Header -->
            <!-- START: FIX - Corrected IDs and styles for Booking Modal Header -->
            <div class="flex justify-between items-center p-6 border-b border-gray-700">
                <h2 id="modal-sport-title" class="text-2xl font-bold text-white">预约</h2>
                <button id="close-modal-button" class="text-gray-400 hover:text-neon-cyan transition duration-150">
            <!-- END: FIX -->
                    <svg class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>

            <!-- Modal Body -->
            <div class="p-6 md:p-8 space-y-8">
                
                <!-- 1. 地点选择 (Location Selection) -->
                <section class="space-y-4">
                    <h3 class="text-xl font-semibold text-white flex items-center">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-2 text-neon-fuchsia" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"></path><circle cx="12" cy="10" r="3"></circle></svg>
                        选择地点
                    </h3>
                    <div class="relative">
                        <input type="text" placeholder="输入地点或场馆名称..." class="w-full p-3 bg-gray-800 text-white border border-gray-700 rounded-lg focus:border-neon-cyan focus:ring-1 focus:ring-neon-cyan/50 transition">
                        <select class="mt-2 w-full p-3 bg-gray-800 text-white border border-gray-700 rounded-lg focus:border-neon-cyan focus:ring-1 focus:ring-neon-cyan/50 transition appearance-none">
                            <option value="" selected="selected">选择附近的场馆</option>
                            <option value="venue1">星辰运动中心 (2.5km)</option>
                            <option value="venue2">城市花园球场 (4.1km)</option>
                            <option value="venue3">未来科技健身房 (1.8km)</option>
                        </select>
                    </div>
                </section>

                <!-- 2. 预约时间分段 (Time Slot Selection) -->
                <section class="space-y-4">
                    <h3 class="text-xl font-semibold text-white flex items-center">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-2 text-neon-fuchsia" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="18" height="18" x="3" y="4" rx="2" ry="2"></rect><line x1="16" x2="16" y1="2" y2="6"></line><line x1="8" x2="8" y1="2" y2="6"></line><line x1="3" x2="21" y1="10" y2="10"></line></svg>
                        选择日期和时段
                    </h3>
                    
                    <!-- 日期选择器 (Days) -->
                    <div class="flex space-x-2 overflow-x-auto pb-2">
                        <!-- 动态生成日期，此处仅为示例 -->
                        <button class="date-btn flex-shrink-0 p-3 bg-gray-700 text-gray-300 rounded-xl hover:bg-neon-cyan hover:text-gray-900 transition duration-150 active-date" data-date="today">今天 (周二)</button>
                        <button class="date-btn flex-shrink-0 p-3 bg-gray-800 text-gray-400 rounded-xl hover:bg-neon-cyan hover:text-gray-900 transition duration-150" data-date="tomorrow">明天 (周三)</button>
                        <button class="date-btn flex-shrink-0 p-3 bg-gray-800 text-gray-400 rounded-xl hover:bg-neon-cyan hover:text-gray-900 transition duration-150" data-date="day3">周四</button>
                        <button class="date-btn flex-shrink-0 p-3 bg-gray-800 text-gray-400 rounded-xl hover:bg-neon-cyan hover:text-gray-900 transition duration-150" data-date="day4">周五</button>
                        <button class="date-btn flex-shrink-0 p-3 bg-gray-800 text-gray-400 rounded-xl hover:bg-neon-cyan hover:text-gray-900 transition duration-150" data-date="day5">周六</button>
                    </div>

                    <!-- 时间段选择器 (Time Slots) -->
                    <div class="grid grid-cols-3 sm:grid-cols-4 lg:grid-cols-6 gap-3 pt-2">
                        <!-- 示例时段 - 绿色表示可用，灰色表示已满，霓虹色表示选中 -->
                        <button class="time-slot-btn p-3 bg-green-700 text-white rounded-lg opacity-80 hover:opacity-100 transition duration-150 font-medium" data-time="08:00">08:00 - 09:00</button>
                        <button class="time-slot-btn p-3 bg-green-700 text-white rounded-lg opacity-80 hover:opacity-100 transition duration-150 font-medium" data-time="09:00">09:00 - 10:00</button>
                        <button class="time-slot-btn p-3 bg-gray-600 text-gray-400 rounded-lg cursor-not-allowed font-medium">10:00 - 11:00 (满)</button>
                        <button class="time-slot-btn p-3 bg-green-700 text-white rounded-lg opacity-80 hover:opacity-100 transition duration-150 font-medium" data-time="11:00">11:00 - 12:00</button>
                        <button class="time-slot-btn p-3 bg-green-700 text-white rounded-lg opacity-80 hover:opacity-100 transition duration-150 font-medium" data-time="12:00">12:00 - 13:00</button>
                        <button class="time-slot-btn p-3 bg-green-700 text-white rounded-lg opacity-80 hover:opacity-100 transition duration-150 font-medium" data-time="13:00">13:00 - 14:00</button>
                        <button class="time-slot-btn p-3 bg-green-700 text-white rounded-lg opacity-80 hover:opacity-100 transition duration-150 font-medium" data-time="14:00">14:00 - 15:00</button>
                        <button class="time-slot-btn p-3 bg-gray-600 text-gray-400 rounded-lg cursor-not-allowed font-medium">15:00 - 16:00 (满)</button>
                        <button class="time-slot-btn p-3 bg-green-700 text-white rounded-lg opacity-80 hover:opacity-100 transition duration-150 font-medium" data-time="16:00">16:00 - 17:00</button>
                    </div>
                    <p class="text-sm text-gray-500 mt-4">请选择一个可用的时段（绿色方块）。</p>
                </section>
            </div>

            <!-- Modal Footer (Action) -->
            <div class="p-6 md:p-8 border-t border-gray-700 flex justify-end">
                <button id="confirm-booking-button" class="px-6 py-3 border border-transparent text-base font-bold rounded-lg shadow-xl text-gray-900 bg-neon-fuchsia hover:bg-neon-fuchsia transition duration-300 transform hover:scale-105">
                    确认预约
                </button>
            </div>

        </div>
    </div>

    <!-- START: 新增身份验证模态框 (Auth Modal) -->
    <div id="auth-modal" class="fixed inset-0 z-[100] hidden items-center justify-center p-4" style="background-color: rgba(0, 0, 0, 0.8);">
        
        <!-- Modal Content Container -->
        <div id="auth-modal-content" class="auth-modal-content rounded-xl shadow-2xl w-full max-w-md transform scale-95 opacity-0 transition-all duration-300">
            
            <!-- Modal Header -->
            <!-- START: FIX - Corrected styles for Auth Modal Header to match white background -->
            <div class="flex justify-between items-center p-6 border-b border-gray-200">
                <h2 id="auth-modal-title" class="text-2xl font-bold text-gray-900">欢迎回来</h2>
                <button id="close-auth-modal-button" class="text-gray-400 hover:text-gray-600 transition duration-150">
            <!-- END: FIX -->
                    <svg class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>

            <!-- Modal Body -->
            <div class="p-6 md:p-8">
                
                <!-- 登录视图 (默认) -->
                <div id="login-view">
                    <form id="login-form" class="space-y-6">
                        <!-- START: 新增登录方式切换Tabs -->
                        <div class="flex border-b border-gray-200">
                            <button type="button" id="login-tab-email" class="login-tab-btn flex-1 py-2 px-4 text-center font-medium border-b-2 border-indigo-500 text-indigo-600">
                                邮箱登录
                            </button>
                            <button type="button" id="login-tab-phone" class="login-tab-btn flex-1 py-2 px-4 text-center font-medium border-b-2 border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300">
                                手机号登录
                            </button>
                            <button type="button" id="login-tab-username" class="login-tab-btn flex-1 py-2 px-4 text-center font-medium border-b-2 border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300">
                                用户名登录
                            </button>
                        </div>
                        <!-- END: 新增登录方式切换Tabs -->

                        <div id="login-input-email">
                            <label for="login-email" class="block text-sm font-medium text-gray-700">邮箱地址</label>
                            <div class="mt-1">
                                <input id="login-email" name="email" type="email" autocomplete="email" required
                                       class="auth-input block w-full rounded-lg shadow-sm p-3 focus:ring-indigo-500 focus:border-indigo-500">
                            </div>
                        </div>

                        <div id="login-input-phone" class="hidden">
                            <label for="login-phone" class="block text-sm font-medium text-gray-700">手机号码</label>
                            <div class="mt-1">
                                <input id="login-phone" name="phone" type="tel" autocomplete="tel"
                                       class="auth-input block w-full rounded-lg shadow-sm p-3 focus:ring-indigo-500 focus:border-indigo-500">
                            </div>
                        </div>

                        <div id="login-input-username" class="hidden">
                            <label for="login-username" class="block text-sm font-medium text-gray-700">用户名</label>
                            <div class="mt-1">
                                <input id="login-username" name="username" type="text" autocomplete="username"
                                       class="auth-input block w-full rounded-lg shadow-sm p-3 focus:ring-indigo-500 focus:border-indigo-500">
                            </div>
                        </div>

                        <div>
                            <label for="login-password" class="block text-sm font-medium text-gray-700">密码</label>
                            <div class="mt-1">
                                <input id="login-password" name="password" type="password" autocomplete="current-password" required
                                       class="auth-input block w-full rounded-lg shadow-sm p-3 focus:ring-indigo-500 focus:border-indigo-500">
                            </div>
                        </div>

                        <div class="flex items-center justify-between">
                            <div class="text-sm">
                                <a href="#" id="show-forgot-password-view" class="font-medium text-indigo-600 hover:text-indigo-500">
                                    忘记密码？
                                </a>
                            </div>
                        </div>

                        <div>
                            <button type="submit" class="w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-lg text-base font-bold text-white bg-indigo-600 hover:bg-indigo-700 transition duration-300 transform hover:scale-105">
                                登录
                            </button>
                        </div>
                    </form>
                    <p class="mt-6 text-center text-sm text-gray-600">
                        还没有账户？
                        <a href="#" id="show-register-view" class="font-medium text-indigo-600 hover:text-indigo-500">
                            立即注册
                        </a>
                    </p>
                </div>

                <!-- 注册视图 (隐藏) -->
                <div id="register-view" class="hidden">
                    <form id="register-form" class="space-y-6">
                        <div>
                            <label for="register-email" class="block text-sm font-medium text-gray-700">邮箱地址</label>
                            <input id="register-email" name="email" type="email" autocomplete="email" required
                                   class="auth-input mt-1 block w-full rounded-lg shadow-sm p-3 focus:ring-indigo-500 focus:border-indigo-500">
                        </div>
                        
                        <!-- START: 新增用户名输入框 -->
                        <div>
                            <label for="register-username" class="block text-sm font-medium text-gray-700">用户名</label>
                            <input id="register-username" name="username" type="text" autocomplete="username" required
                                   class="auth-input mt-1 block w-full rounded-lg shadow-sm p-3 focus:ring-indigo-500 focus:border-indigo-500">
                        </div>
                        <!-- END: 新增用户名输入框 -->

                        <div>
                            <label for="register-password" class="block text-sm font-medium text-gray-700">设置密码</label>
                            <input id="register-password" name="password" type="password" autocomplete="new-password" required
                                   class="auth-input mt-1 block w-full rounded-lg shadow-sm p-3 focus:ring-indigo-500 focus:border-indigo-500">
                        </div>
                        
                        <div>
                            <label for="register-confirm-password" class="block text-sm font-medium text-gray-700">确认密码</label>
                            <input id="register-confirm-password" name="confirm-password" type="password" autocomplete="new-password" required
                                   class="auth-input mt-1 block w-full rounded-lg shadow-sm p-3 focus:ring-indigo-500 focus:border-indigo-500">
                        </div>

                        <div>
                            <button type="submit" id="register-submit" class="w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-lg text-base font-bold text-white bg-indigo-600 hover:bg-indigo-700 transition duration-300 transform hover:scale-105">
                                创建账户
                            </button>
                        </div>
                    </form>
                    <p class="mt-6 text-center text-sm text-gray-600">
                        已有账户？
                        <a href="#" id="show-login-view" class="font-medium text-indigo-600 hover:text-indigo-500">
                            返回登录
                        </a>
                    </p>
                </div>

                <!-- 忘记密码视图 (隐藏) -->
                <div id="forgot-password-view" class="hidden">
                    <form id="forgot-password-form" class="space-y-6">
                        <p class="text-gray-700">请输入您的账户信息，我们将发送重置链接。</p>
                        
                        <!-- START: 新增忘记密码方式切换Tabs -->
                        <div class="flex border-b border-gray-200">
                            <button type="button" id="forgot-tab-email" class="forgot-tab-btn flex-1 py-2 px-4 text-center font-medium border-b-2 border-indigo-500 text-indigo-600">
                                通过邮箱
                            </button>
                            <button type="button" id="forgot-tab-phone" class="forgot-tab-btn flex-1 py-2 px-4 text-center font-medium border-b-2 border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300">
                                通过手机号
                            </button>
                        </div>
                        <!-- END: 新增忘记密码方式切换Tabs -->
                        
                        <div id="forgot-input-email">
                            <label for="forgot-email" class="block text-sm font-medium text-gray-700">邮箱地址</label>
                            <input id="forgot-email" name="email" type="email" autocomplete="email" required
                                   class="auth-input mt-1 block w-full rounded-lg shadow-sm p-3 focus:ring-indigo-500 focus:border-indigo-500">
                        </div>
                        
                        <div id="forgot-input-phone" class="hidden">
                            <label for="forgot-phone" class="block text-sm font-medium text-gray-700">手机号码</label>
                            <input id="forgot-phone" name="phone" type="tel" autocomplete="tel"
                                   class="auth-input mt-1 block w-full rounded-lg shadow-sm p-3 focus:ring-indigo-500 focus:border-indigo-500">
                        </div>

                        <div>
                            <button type="submit" class="w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-lg text-base font-bold text-white bg-indigo-600 hover:bg-indigo-700 transition duration-300 transform hover:scale-105">
                                发送重置链接
                            </button>
                        </div>
                    </form>
                    <p class="mt-6 text-center text-sm text-gray-600">
                        记起密码了？
                        <a href="#" id="show-login-view-from-forgot" class="font-medium text-indigo-600 hover:text-indigo-500">
                            返回登录
                        </a>
                    </p>
                </div>

                <!-- 身份验证消息提示栏 -->
                <div id="auth-message" class="hidden mt-4 p-3 rounded-lg text-center text-sm font-medium"></div>

            </div>
        </div>
    </div>
    <!-- END: 新增身份验证模态框 -->

    <!-- START: 新增自定义提示框 (Custom Alert) -->
    <div id="custom-alert" class="fixed inset-0 z-[110] hidden items-center justify-center p-4 transition-opacity duration-300 opacity-0">
        <div id="custom-alert-content" class="w-full max-w-sm rounded-xl shadow-2xl border border-neon-cyan/50 p-6 text-center transform scale-95 transition-all duration-300">
            <h3 id="custom-alert-title" class="text-xl font-bold text-neon-cyan mb-4">提示</h3>
            <p id="custom-alert-message" class="text-gray-200 mb-6"></p>
            <button id="custom-alert-close" class="px-6 py-2 bg-neon-fuchsia text-gray-900 font-bold rounded-lg shadow-lg hover:bg-neon-fuchsia transition duration-300 transform hover:scale-105">
                关闭
            </button>
        </div>
    </div>
    <!-- END: 新增自定义提示框 -->

    <script type="module">
  // Import the functions you need from the SDKs you need
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-app.js";
  import { getAuth, createUserWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-auth.js";
  // TODO: Add SDKs for Firebase products that you want to use
  // https://firebase.google.com/docs/web/setup#available-libraries


    const btn = document.querySelector(".register-submit");
 
    // Your web app's Firebase configuration
  const firebaseConfig = {
    apiKey: "AIzaSyCJWGwgz6_-f73tDa0XhcEZNjVGgvAl5QA",
    authDomain: "authentication-ea1a6.firebaseapp.com",
    projectId: "authentication-ea1a6",
    storageBucket: "authentication-ea1a6.firebasestorage.app",
    messagingSenderId: "989899401271",
    appId: "1:989899401271:web:91b04fc926be5c336577b2"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);

  btn.addEventListener("click",function(Event){  
    const email = document.getElementById("register-email").value;
    const password = document.getElementById("register-password").value;
    event.preventDefault（）;
    createUserWithEmailAndPassword(auth, email, password)
    .then((userCredential) => {
        // Signed up 
        const user = userCredential.user;
        console.log{"Account Create....."}
  })
    .catch((error) => {
        const errorCode = error.code;
        const errorMessage = error.message;
        console.log{errorMessage}
  });
    
  })
    </script>

<!-- JavaScript -->
    <script>
        // --- 全局变量和配置 ---
        let currentReservationCount = 499; 
        const PRIZE_TARGET = 500; 

        // 预约计数器元素
        const reservationCountElement = document.getElementById('reservation-count');
        const prizeMessageElement = document.getElementById('prize-message');
        const prizeStatusElement = document.getElementById('prize-status');

        // 移动菜单元素
        const mobileMenuButton = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');
        const mobileMenuLinks = document.querySelectorAll('.mobile-menu-link');

        // 预约模态框元素
        const bookingModal = document.getElementById('booking-modal');
        const modalContent = document.getElementById('modal-content');
        // START: FIX - Corrected ID to 'close-modal-button'
        const closeModalButton = document.getElementById('close-modal-button');
        // END: FIX
        const confirmBookingButton = document.getElementById('confirm-booking-button');
        // START: FIX - Corrected ID to 'modal-sport-title'
        const sportTitle = document.getElementById('modal-sport-title');
        // END: FIX
        const rotatorFaces = document.querySelectorAll('.rotator-face');

        // 身份验证模态框元素
        const authModal = document.getElementById('auth-modal');
        const authModalContent = document.getElementById('auth-modal-content');
        const authModalTitle = document.getElementById('auth-modal-title');
        const openAuthModalButton = document.getElementById('auth-modal-button');
        const openMobileAuthButton = document.getElementById('mobile-auth-button');
        const closeAuthModalButton = document.getElementById('close-auth-modal-button');

        // 身份验证视图
        const loginView = document.getElementById('login-view');
        const registerView = document.getElementById('register-view');
        // START: FIX - Removed duplicate forgotPasswordView declaration
        const forgotPasswordView = document.getElementById('forgot-password-view');
        // END: FIX
        const authMessage = document.getElementById('auth-message');

        // 视图切换链接
        const showRegisterLink = document.getElementById('show-register-view');
        const showLoginLink = document.getElementById('show-login-view');
        const showForgotPasswordLink = document.getElementById('show-forgot-password-view');
        const showLoginFromForgotLink = document.getElementById('show-login-view-from-forgot');

        // 表单
        const loginForm = document.getElementById('login-form');
        const registerForm = document.getElementById('register-form');
        // START: FIX - Removed duplicate forgotPasswordForm declaration
        const forgotPasswordForm = document.getElementById('forgot-password-form');
        // END: FIX
        
        // START: 新增 - 登录Tab元素
        let activeLoginTab = 'email'; // 默认登录方式
        const loginTabButtons = document.querySelectorAll('.login-tab-btn');
        const loginEmailInput = document.getElementById('login-email');
        const loginPhoneInput = document.getElementById('login-phone');
        const loginUsernameInput = document.getElementById('login-username');
        const loginInputEmailWrapper = document.getElementById('login-input-email');
        const loginInputPhoneWrapper = document.getElementById('login-input-phone');
        const loginInputUsernameWrapper = document.getElementById('login-input-username');
        
        // START: 新增 - 注册表单额外字段
        const registerUsernameInput = document.getElementById('register-username');

        // START: 新增 - 忘记密码Tab元素
        let activeForgotTab = 'email'; // 默认重置方式
        const forgotTabButtons = document.querySelectorAll('.forgot-tab-btn');
        const forgotEmailInput = document.getElementById('forgot-email');
        const forgotPhoneInput = document.getElementById('forgot-phone');
        const forgotInputEmailWrapper = document.getElementById('forgot-input-email');
        const forgotInputPhoneWrapper = document.getElementById('forgot-input-phone');
        // END: 新增元素

        // START: 新增 - 登录状态管理
        let isUserLoggedIn = false;
        let sportToBookAfterLogin = null; // 用于存储登录后需要打开的运动项目
        // END: 新增 - 登录状态管理

        // 自定义提示框元素
        const customAlert = document.getElementById('custom-alert');
        const customAlertContent = document.getElementById('custom-alert-content');
        const customAlertMessage = document.getElementById('custom-alert-message');
        const customAlertCloseButton = document.getElementById('custom-alert-close');

        
        // --- 移动端菜单逻辑 ---
        mobileMenuButton.addEventListener('click', () => {
            mobileMenu.classList.toggle('hidden');
        });

        // 点击移动端链接后关闭菜单
        mobileMenuLinks.forEach(link => {
            link.addEventListener('click', () => {
                mobileMenu.classList.add('hidden');
            });
        });
        
        // --- 预约计数器逻辑 ---
        function formatNumber(num) {
            return num.toString().padStart(3, '0');
        }

        function updateReservationCounter() {
            if (!reservationCountElement) return; // 确保元素存在
            reservationCountElement.textContent = formatNumber(currentReservationCount);

            if (currentReservationCount === PRIZE_TARGET) {
                prizeMessageElement.classList.add('hidden');
                prizeStatusElement.classList.remove('hidden');
            } else if (currentReservationCount > PRIZE_TARGET) {
                prizeMessageElement.innerHTML = `恭喜第 <span class="text-neon-fuchsia font-bold text-lg">${PRIZE_TARGET}</span> 位幸运用户已产生！`;
                prizeStatusElement.classList.add('hidden');
            } else {
                const remaining = PRIZE_TARGET - currentReservationCount;
                prizeMessageElement.innerHTML = `再有 <span class="text-neon-cyan font-bold text-lg">${remaining}</span> 位预约用户，将送出豪华礼包！`;
                prizeStatusElement.classList.add('hidden');
            }
        }
        
        // --- 自定义提示框逻辑 (替换 alert) ---
        function showCustomAlert(message, title = "提示") {
            customAlertMessage.textContent = message;
            document.getElementById('custom-alert-title').textContent = title;
            
            customAlert.classList.remove('hidden');
            setTimeout(() => {
                customAlert.classList.remove('opacity-0');
                customAlertContent.classList.remove('scale-95');
            }, 10);
        }

        function closeCustomAlert() {
            customAlert.classList.add('opacity-0');
            customAlertContent.classList.add('scale-95');
            setTimeout(() => {
                customAlert.classList.add('hidden');
            }, 300);
        }

        customAlertCloseButton.addEventListener('click', closeCustomAlert);
        customAlert.addEventListener('click', (e) => {
            if (e.target === customAlert) {
                closeCustomAlert();
            }
        });


        // --- 预约模态框逻辑 ---
        let selectedSport = '';

        function openBookingModal(sportName) {
            selectedSport = sportName;
            // START: FIX - Check if sportTitle exists before setting textContent
            if (sportTitle) {
                sportTitle.textContent = `预约 ${sportName}`;
            }
            // END: FIX
            bookingModal.classList.remove('hidden');
            bookingModal.classList.add('flex');
            
            setTimeout(() => {
                modalContent.classList.remove('scale-95', 'opacity-0');
                modalContent.classList.add('scale-100', 'opacity-100');
            }, 10); 
        }

        function closeBookingModal() {
            modalContent.classList.remove('scale-100', 'opacity-100');
            modalContent.classList.add('scale-95', 'opacity-0');
            
            setTimeout(() => {
                bookingModal.classList.add('hidden');
                bookingModal.classList.remove('flex');
            }, 300);
        }

        rotatorFaces.forEach(face => {
            face.addEventListener('click', () => {
                const sportName = face.getAttribute('data-sport');
                
                // START: MODIFIED - 检查登录状态
                if (isUserLoggedIn) {
                    // 1. 如果已登录，直接打开预约模态框
                    openBookingModal(sportName);
                } else {
                    // 2. 如果未登录，记录他们想预约的项目，并打开登录模态框
                    sportToBookAfterLogin = sportName;
                    openAuthModal('login');
                    // 提示用户需要登录
                    setTimeout(() => showAuthMessage('请先登录以继续预约。', true), 300);
                }
                // END: MODIFIED
            });
        });

        // START: FIX - Add safety check for closeModalButton
        if (closeModalButton) {
            closeModalButton.addEventListener('click', closeBookingModal);
        } else {
            console.error("Booking modal close button ('close-modal-button') not found.");
        }
        // END: FIX

        bookingModal.addEventListener('click', (e) => {
            if (e.target === bookingModal) {
                closeBookingModal();
            }
        });

        // 模拟确认预约事件 (移除 alert)
        confirmBookingButton.addEventListener('click', () => {
            const selectedSlot = document.querySelector('.time-slot-btn.bg-neon-fuchsia');
            if (!selectedSlot) {
                // 使用自定义提示框
                showCustomAlert('请选择一个时段进行预约！', '操作无效');
                return;
            }

            currentReservationCount++;
            updateReservationCounter(); 

            const venue = document.querySelector('select').value;
            const time = selectedSlot.getAttribute('data-time');

            const confirmationMessage = `您已成功预约 ${selectedSport}，时间：${time}，地点：${venue || '附近的场馆'}`;
            
            let prizeMessage = "";
            if (currentReservationCount === PRIZE_TARGET) {
                prizeMessage = "\n🎉 恭喜您成为幸运儿！请联系客服领取奖品！";
            }
            
            // 关闭预约模态框并显示成功提示
            closeBookingModal();
            setTimeout(() => {
                showCustomAlert(confirmationMessage + prizeMessage, '✅ 预约成功！');
            }, 300); // 延迟显示，等待上一个模态框关闭动画
        });


        // --- 身份验证模态框逻辑 (新增) ---
        
        function showAuthMessage(message, isError = false) {
            authMessage.textContent = message;
            authMessage.classList.remove('hidden');
            if (isError) {
                authMessage.classList.remove('bg-green-100', 'text-green-700');
                authMessage.classList.add('bg-red-100', 'text-red-700'); // 错误样式
            } else {
                authMessage.classList.remove('bg-red-100', 'text-red-700');
                authMessage.classList.add('bg-green-100', 'text-green-700'); // 成功样式
            }
        }

        function clearAuthMessage() {
            authMessage.classList.add('hidden');
            authMessage.textContent = '';
        }

        // START: 新增 - 登录Tab切换逻辑
        function showLoginTab(tabId) {
            activeLoginTab = tabId;
            
            // 更新Tab按钮样式
            loginTabButtons.forEach(btn => {
                const isBtnActive = btn.id === `login-tab-${tabId}`;
                btn.classList.toggle('text-indigo-600', isBtnActive);
                btn.classList.toggle('border-indigo-500', isBtnActive);
                btn.classList.toggle('text-gray-500', !isBtnActive);
                btn.classList.toggle('border-transparent', !isBtnActive);
                btn.classList.toggle('hover:text-gray-700', !isBtnActive);
                btn.classList.toggle('hover:border-gray-300', !isBtnActive);
            });

            // 更新输入框可见性
            loginInputEmailWrapper.classList.toggle('hidden', tabId !== 'email');
            loginInputPhoneWrapper.classList.toggle('hidden', tabId !== 'phone');
            loginInputUsernameWrapper.classList.toggle('hidden', tabId !== 'username');
            
            // 更新输入框的 required 属性
            if(loginEmailInput) loginEmailInput.required = (tabId === 'email');
            if(loginPhoneInput) loginPhoneInput.required = (tabId === 'phone');
            if(loginUsernameInput) loginUsernameInput.required = (tabId === 'username');
        }
        
        // START: 新增 - 忘记密码Tab切换逻辑
        function showForgotTab(tabId) {
            activeForgotTab = tabId;

            // 更新Tab按钮样式
            forgotTabButtons.forEach(btn => {
                const isBtnActive = btn.id === `forgot-tab-${tabId}`;
                btn.classList.toggle('text-indigo-600', isBtnActive);
                btn.classList.toggle('border-indigo-500', isBtnActive);
                btn.classList.toggle('text-gray-500', !isBtnActive);
                btn.classList.toggle('border-transparent', !isBtnActive);
                btn.classList.toggle('hover:text-gray-700', !isBtnActive);
                btn.classList.toggle('hover:border-gray-300', !isBtnActive);
            });

            // 更新输入框可见性
            forgotInputEmailWrapper.classList.toggle('hidden', tabId !== 'email');
            forgotInputPhoneWrapper.classList.toggle('hidden', tabId !== 'phone');

            // 更新输入框的 required 属性
            if(forgotEmailInput) forgotEmailInput.required = (tabId === 'email');
            if(forgotPhoneInput) forgotPhoneInput.required = (tabId === 'phone');
        }


        function showAuthView(viewId) {
            clearAuthMessage();
            if(loginView) loginView.classList.add('hidden');
            if(registerView) registerView.classList.add('hidden');
            if(forgotPasswordView) forgotPasswordView.classList.add('hidden');

            // 如果用户从登录视图切换到其他视图（如注册），则取消待处理的预约
            if (viewId !== 'login') {
                sportToBookAfterLogin = null;
            }

            if (viewId === 'login') {
                if(loginView) loginView.classList.remove('hidden');
                if(authModalTitle) authModalTitle.textContent = '欢迎回来';
                showLoginTab('email'); // 重置为默认Tab
            } else if (viewId === 'register') {
                if(registerView) registerView.classList.remove('hidden');
                if(authModalTitle) authModalTitle.textContent = '创建新账户';
            } else if (viewId === 'forgot-password') {
                if(forgotPasswordView) forgotPasswordView.classList.remove('hidden');
                if(authModalTitle) authModalTitle.textContent = '重置密码';
                showForgotTab('email'); // 重置为默认Tab
            }
        }

        function openAuthModal(defaultView = 'login') {
            showAuthView(defaultView);
            authModal.classList.remove('hidden');
            authModal.classList.add('flex');
            
            setTimeout(() => {
                authModalContent.classList.remove('scale-95', 'opacity-0');
                authModalContent.classList.add('scale-100', 'opacity-100');
            }, 10);
            
            // 如果从移动菜单打开，先关闭移动菜单
            if(mobileMenu) mobileMenu.classList.add('hidden');
        }

        function closeAuthModal() {
            authModalContent.classList.remove('scale-100', 'opacity-100');
            authModalContent.classList.add('scale-95', 'opacity-0');
            
            // 如果用户关闭了登录框，则取消待处理的预约
            sportToBookAfterLogin = null;

            setTimeout(() => {
                authModal.classList.add('hidden');
                authModal.classList.remove('flex');
            }, 300);
        }

        // START: 新增 - 根据登录状态更新UI
        function updateAuthUI() {
            if (isUserLoggedIn) {
                if (openAuthModalButton) openAuthModalButton.textContent = '退出登录';
                if (openMobileAuthButton) openMobileAuthButton.textContent = '退出登录';
            } else {
                if (openAuthModalButton) openAuthModalButton.textContent = '登录/注册';
                if (openMobileAuthButton) openMobileAuthButton.textContent = '登录/注册';
            }
        }
        // END: 新增 - 根据登录状态更新UI

        // 监听触发器
        // START: MODIFIED - 修改登录按钮的点击逻辑
        function handleAuthButtonClick() {
            if (isUserLoggedIn) {
                // 如果已登录 -> 登出
                isUserLoggedIn = false;
                sportToBookAfterLogin = null; // 清除待处理预约
                updateAuthUI();
                showCustomAlert('您已成功退出登录。', '操作完成');
            } else {
                // 如果未登录 -> 打开登录模态框
                openAuthModal('login');
            }
        }
        
        if(openAuthModalButton) openAuthModalButton.addEventListener('click', handleAuthButtonClick);
        if(openMobileAuthButton) openMobileAuthButton.addEventListener('click', handleAuthButtonClick);
        // END: MODIFIED
        
        if(closeAuthModalButton) closeAuthModalButton.addEventListener('click', closeAuthModal);
        
        if(authModal) authModal.addEventListener('click', (e) => {
            if (e.target === authModal) {
                closeAuthModal();
            }
        });

        // 监听视图切换链接
        if(showRegisterLink) showRegisterLink.addEventListener('click', (e) => {
            e.preventDefault();
            showAuthView('register');
        });
        if(showLoginLink) showLoginLink.addEventListener('click', (e) => {
            e.preventDefault();
            showAuthView('login');
        });
        if(showForgotPasswordLink) showForgotPasswordLink.addEventListener('click', (e) => {
            e.preventDefault();
            showAuthView('forgot-password');
        });
        if(showLoginFromForgotLink) showLoginFromForgotLink.addEventListener('click', (e) => {
            e.preventDefault();
            showAuthView('login');
        });

        // START: 新增 - 监听Tab点击事件
        if(document.getElementById('login-tab-email')) document.getElementById('login-tab-email').addEventListener('click', () => showLoginTab('email'));
        if(document.getElementById('login-tab-phone')) document.getElementById('login-tab-phone').addEventListener('click', () => showLoginTab('phone'));
        if(document.getElementById('login-tab-username')) document.getElementById('login-tab-username').addEventListener('click', () => showLoginTab('username'));
        
        if(document.getElementById('forgot-tab-email')) document.getElementById('forgot-tab-email').addEventListener('click', () => showForgotTab('email'));
        if(document.getElementById('forgot-tab-phone')) document.getElementById('forgot-tab-phone').addEventListener('click', () => showForgotTab('phone'));
        // END: 新增 - 监听Tab点击事件


        // 监听表单提交 (模拟)
        if(loginForm) loginForm.addEventListener('submit', (e) => {
            e.preventDefault();
            
            let identifier = '';
            // 根据激活的Tab获取对应的输入值
            if (activeLoginTab === 'email') {
                identifier = loginEmailInput.value;
            } else if (activeLoginTab === 'phone') {
                identifier = loginPhoneInput.value;
            } else if (activeLoginTab === 'username') {
                identifier = loginUsernameInput.value;
            }
            
            // 获取密码
            const password = document.getElementById('login-password').value;
            
            console.log(`登录尝试 (${activeLoginTab}):`, identifier);
            
            // --- START: MODIFIED - 添加特定用户名和密码验证 ---
            if (activeLoginTab === 'username' && identifier === 'ARX' && password === 'ARX2025') {
                // 登录成功
                console.log('登录成功: ARX');
                
                // 1. 设置登录状态
                isUserLoggedIn = true;
                // 2. 更新UI（例如，将“登录”按钮变为“退出登录”）
                updateAuthUI();
                
                // 3. 模拟API调用
                showAuthMessage('登录成功！欢迎回来。', false);
                
                // 4. 1.5秒后关闭登录模态框
                setTimeout(() => {
                    closeAuthModal();

                    // 5. (关键步骤) 检查是否有待处理的预约
                    if (sportToBookAfterLogin) {
                        // 延迟 300ms（等待登录框关闭动画完成）后打开预约框
                        setTimeout(() => {
                            openBookingModal(sportToBookAfterLogin);
                            sportToBookAfterLogin = null; // 清除待处理状态
                        }, 300);
                    }
                }, 1500);

            } else {
                // 登录失败
                console.log(`登录失败 (${activeLoginTab}):`, identifier);
                let errorMessage = '登录信息不正确。';
                if (activeLoginTab !== 'username') {
                    errorMessage = '请切换到“用户名”方式登录。';
                } else if (identifier !== 'ARX') {
                    errorMessage = '用户名不正确。';
                } else if (password !== 'ARX2025') {
                    errorMessage = '密码不正确。';
                }
                showAuthMessage(errorMessage, true);
            }
            // --- END: MODIFIED ---
        });

        if(registerForm) registerForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const email = registerEmailInput.value;
            const username = registerUsernameInput.value; // 获取用户名
            const password = registerForm.password.value;
            const confirmPassword = registerForm['confirm-password'].value;

            if (password !== confirmPassword) {
                showAuthMessage('两次输入的密码不一致！', true);
                return;
            }
            console.log("注册尝试:", email, "用户名:", username); // 更新日志
            // 模拟API调用
            showAuthMessage('注册成功！正在跳转至登录...', false);
            setTimeout(() => showAuthView('login'), 1500);
        });

        if(forgotPasswordForm) forgotPasswordForm.addEventListener('submit', (e) => {
            e.preventDefault();
            
            let identifier = '';
            // 根据激活的Tab获取对应的输入值
            if (activeForgotTab === 'email') {
                identifier = forgotEmailInput.value;
            } else if (activeForgotTab === 'phone') {
                identifier = forgotPhoneInput.value;
            }

            console.log(`密码重置请求 (${activeForgotTab}):`, identifier);
            // 模拟API调用
            showAuthMessage(`重置链接/验证码已发送至 ${identifier}，请注意查收。`, false);
            setTimeout(() => showAuthView('login'), 2500);
        });


        // --- 时段选择切换逻辑 ---
        document.querySelectorAll('.time-slot-btn').forEach(btn => {
            if (!btn.classList.contains('cursor-not-allowed')) {
                btn.addEventListener('click', (e) => {
                    // 移除所有已选状态
                    document.querySelectorAll('.time-slot-btn').forEach(b => {
                        if (b.classList.contains('bg-neon-fuchsia')) {
                            b.classList.remove('bg-neon-fuchsia', 'text-gray-900', 'border-2', 'border-white/50', 'shadow-lg');
                            b.classList.add('bg-green-700', 'text-white', 'opacity-80');
                        }
                    });

                    // 设置当前按钮为选中状态
                    e.currentTarget.classList.remove('bg-green-700', 'text-white', 'opacity-80');
                    e.currentTarget.classList.add('bg-neon-fuchsia', 'text-gray-900', 'border-2', 'border-white/50', 'shadow-lg');
                });
            }
        });

        // --- 页面初始化 ---
        document.addEventListener('DOMContentLoaded', () => {
            updateReservationCounter(); // 页面加载时初始化计数器显示
            // START: FIX - Run initial tab setup on load
            showLoginTab('email');
            showForgotTab('email');
            // END: FIX
            updateAuthUI(); // 初始化登录按钮的文本
        });

    </script>

    

</body></html>


